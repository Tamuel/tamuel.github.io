---
title: "데이터베이스 정리"
date: 2019-03-04 12:50:30 -0400
categories: Database
tags: Database
---

# 데이터베이스(DB) 정리

---

# 왜 DBMS를 사용하는가?

## DBMS
DBMS (Database Management System), 데이터베이스 관리 시스템
* DB를 사용자가 만들고 관리할 수 있게 해주는 프로그램
* DB를 정의 한다는 것은 DB에 들어갈 **데이터 타입, 구조, 제약 조건** 을 특정하는 것을 말함
* DB에 대한 정의들이나 스펙은 DB Catalog, Dictionary 혹은 **Meta-data** 라는 이름으로 저장됨
* **쿼리**(Query, 질의)란 DBMS에 던지는 질의로서 쿼리를 던지면 DBMS가 그에 맞는 데이터를 보내줌
* **트렌섹션**(Transaction)이란 데이터가 DB로 부터 읽어지거나, DB에 쓰여지는 한 번의 과정을 말함
  * ACID 속성을 따르는 DB Operation의 배열(Sequence)을 말함

  |속성|설명|
  |--|--|
  |Atomicity (원자성)|All or Nothing, 시작에서 끝까지 전체가 성공적으로 수행되었거나, 전혀 수행되지 않거나(부분이 수행되면 안됨)|
  |Consistency (일관성)|트렌섹션이 일어나더라도 제약조건을 계속 만족해야함|
  |Isolation (고립성)|여러 트렌섹션이 동시에 일어나더라도 차례대로 실핸한 것과 같은 효과가 나야함|
  |Durability (지속성)|트렌섹션의 데이터는 다른 트렌섹션이 변경하지 않는 한 변경되지 않아야함|

* DBMS는 S/W, H/W적인 데이터 방어, 보안을 담당하기도함
* **Database System** = DBMS + DB
* **DDL** (Data Definition Language) : Conceptual, External 스키마 정의를 위한 언어
* **DML** (Data Manipulation Language) : DB 관리를 위한 언어 (Retrieval, Insertion, Deletion, Modification)
* **SDL** (Storage Definition Language) : Internal 스키마 정의를 위한 언어
  * 최근 SDL을 제공하는 언어는 없으며, Internal 스키마는 함수, 파라미터, 스토리지 명세로 이루어짐

![](/assets/images/markdown-img-paste-20190304130007739.png)

## DB와 파일 프로세싱의 차이
1. 자기기술성(Self-describing nature)을 위해 DB스키마를 저장하는 카탈로그를 이용함
  * **DB스키마** : DB구조와 제약 조건 등에 관한 전반적인 명세를 기술한 메타데이터 집합
2. 프로그램과 데이터가 서로 독립적 (분리해줌)
3. 데이터에 대한 여러 사용자 View를 제공함 (필요한 데이터만 볼 수 있도록)
4. 데이터 공유와, 다수의 유저의 트렌섹션 프로세싱을 담당

## Three-Schema 아키텍쳐
* 사용자 어플리케이션과 물리적 DB를 나누기위해 사용

#### External 스키마
각각의 사용자에 대한 정보 (=User views), 특정 사용자 그룹에 대해 보여줄 데이터와 숨길 데이터 정의 등

#### Conceptual 스키마
사용자와 의사소통을 DB의 모든 구조가 정의

#### Internal 스키마
물리적인 DB 정보, Conceptual 스키마의 실제 정보가 들어있음, 물리적인 스토리지 구조에 대해 정의
* 맵핑(Mapping) : 만약 사용자가 데이터에 접근하려 한다면 Exterenal -> Conceptual -> Internal 까지가서 데이터를 가져온 다음 반대로 Internal -> Conceptual -> External까지 나오게 되는데 이 때 각 레벨에 맞게 포멧을 변경하는 것을 맵핑이라 한다

![](/assets/images/markdown-img-paste-20190304132153712.png)

## 데이터 독립성 (Data Independence)
한 레벨의 스키마를 수정하더라도 상위 레벨의 스키마에는 변화가 없는 DB의 능력

#### Logical Data Independence
Conceptual 스키마를 수정하더라도 External 스키마나 어플리케이션 프로그램에 영향을 주지 않음. View 정의 정도는 수정해줘야함

#### Physical Data Independence
Internal 스키마를 수정하더라도 Conceptual 스키마를 바꿀 필요는 없음, 그렇기 때문에 External 스키마도 수정하지 않아도됨

---

# Relational Data Model (관계 데이터 모델)

## Relational Data Model
Table과 집합 이론, 1차 Predicate 로직을 사용한 모델
* Oracle DBMS가 사용
* **SQL 쿼리 언어** 가 상업적 DBMS의 표준
* Relational algebra와 Relational calculus는 관계 모델의 형식 언어. Relational calculus는 SQL 언어 제작 시, Relational algebra는 DB 구현 및 쿼리 프로세싱과 최적화 시 사용

![](/assets/images/markdown-img-paste-20190304140510345.png)

#### Operation
* Retrieval : query
* Modification : insert, delete, update

### The Structure Component of the Relational Model (구조)
Relation, 관계의 구조 (Tuple, Attribute, Value 등)

#### Relation 스키마 R(A1, A2, ... An)
* R은 Relation 이름, A1 ~ An은 Attribute 들
* Relation 안의 튜플은 순서를 가지지 않음 (집합)

|스키마|설명|
|--|--|
|**Tuple**|값들의 순서 리스트, t=<v1, v2, ..., vn>, n-tuple이라고도 함|
|**t[Ai], t.Ai**|튜블 t의 Attribute Ai의 값, dom(Ai)의 한 원소|
|**Domain** (dom)|Attribute가 가질 수 있는 값의 집합, 제약 조건이라 할 수 있음|
|**t[Au, Aw, ..., Az], t.(Au, Aw, ..., Az)**|Attribute Au, Aw, .. Az의 값을 포함하는 **서브튜플** <vu, vw, ... vz>|
|**R에서 D로의 맵핑**|D = dom(A1) U dom(A2) U ... U dom(An) 일 때 Tuple t를 R에서 D로의 맵핑이라함|
|**Relation Instance**|r(R) or r : r(R) = {t1, t2, ..., tm}, 튜플의 집합|

### The Integrity Component of the Relational Model (완전성)
Constraints, 제약 조건, Relation의 모든 Relation instance들이 만족해야하는 조건

#### Key Constraint
* NULL Value : 해당 사항 없음 혹은 누락

|키|설명|
|--|--|
|**Superkey**(슈퍼키)|**Attribute 집합 A** 중 한 Relation 안의 두 튜플 T1, T2의 A 값들이 모두 다를 경우 (T1[A] != T2[A]) A를 Superkey 라함, 유일하지만 최소는 아님|
|**Key**(키)|최소 Superkey라고 생각하면됨. Superkey를 구성하는 Attribute 중 어느 하나라도 빠지면 Superkey가 될 수 없을 경우, 유일하고 최소|
|**Candidate key**(후보키)|키의 집합|
|**Primary key**(기본키)|Candidate key 중 선택된 하나의 메인 키, NULL이면 안되고, 동일한 값 중복되어 저장될 수 없음|
|**Alternative key**(대체키)|Candidate key 중 Primary key를 제외한 키|
|**Foreign key**(외래키)|릴레이션 R1에서 다른 릴레이션 R2의 Primary key를 가리키는 키, 다른 릴레이션 참조 가능하게 만듬,Foreign key의 도메인은 R2의 Primary key의 도메인과 같아야함, Foreign key의 Attribute들을 **Reference**라고함|

#### Domain Constraint
각 열은 그 열(Attribute)의 **<데이터 타입, 범위>** 를 만족해야함
* 범위가 데이터 타입 마다 똑같을 필요는 없음
* 범위는 default value (기본값), NOT NULL constraint, CHECK constraint, collations 등등 사용 가능

#### Constraints on NULLs
NULL, NOT NULL constraints

#### Entity Integrity Constraints
Primary 키의 열은 무조건 NOT NULL

#### Referential Integrity Constraints
Foreign 키는 참조하는 Relation의 Primary 키와 같은 것을 가지거나 NULL 값을 가져야 함 (Foreign 키의 허상 참조 방지)

#### Oracle의 SQL 구문

![](/assets/images/markdown-img-paste-20190304150612738.png)

#### 변경 연산과 Integry Constraints Violation
변경 연산은 Integrity Constraints를 위반하지 않아야 함
* 위반할 경우 Error 처리 (해당 구문이 수행되지 않은 것과 같음)
* **INSERT (삽입)** : Integrity Constraints를 위반할 가능성이 있음 (NULL)
* **DELETE (삭제)** : Referential Integry Constraints를 위반할 가능성 있음 (다른 데이터가 참조하고 있을 수도 있음)
* **UPDATA (갱신)** : Integrity Constraints를 위반할 가능성이 있음 (이미 참조하는 대상이 있을 경우)


### The Manipulative Component of the Relational Model (구현)
Query language, 쿼리 언어 (Relational algebra + Relational calculus)



#### Relational Argebra

#### Relational Calculus

## Database Design Theory

### Functional Dependecy

### Normal Forms
